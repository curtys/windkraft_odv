(function(a,b){if(typeof define==="function"&&define.amd){define(["d3"],b)}else{if(typeof module==="object"&&module.exports){module.exports=function(c){c.tip=b(c);return c.tip}}else{a.d3.tip=b(a.d3)}}}(this,function(a){return function(){var u=k,f=c,h=r,p=o(),l=null,q=null,z=null;function j(A){l=w(A);q=l.createSVGPoint();document.body.appendChild(p)}j.show=function(){var H=Array.prototype.slice.call(arguments);if(H[H.length-1] instanceof SVGElement){z=H.pop()}var G=h.apply(this,H),A=f.apply(this,H),C=u.apply(this,H),E=t(),F=i.length,I,B=document.documentElement.scrollTop||document.body.scrollTop,D=document.documentElement.scrollLeft||document.body.scrollLeft;E.html(G).style({opacity:1,"pointer-events":"all"});while(F--){E.classed(i[F],false)}I=x.get(C).apply(this);E.classed(C,true).style({top:(I.top+A[0])+B+"px",left:(I.left+A[1])+D+"px"});return j};j.hide=function(){var A=t();A.style({opacity:0,"pointer-events":"none"});return j};j.attr=function(C,A){if(arguments.length<2&&typeof C==="string"){return t().attr(C)}else{var B=Array.prototype.slice.call(arguments);a.selection.prototype.attr.apply(t(),B)}return j};j.style=function(C,A){if(arguments.length<2&&typeof C==="string"){return t().style(C)}else{var B=Array.prototype.slice.call(arguments);a.selection.prototype.style.apply(t(),B)}return j};j.direction=function(A){if(!arguments.length){return u}u=A==null?A:a.functor(A);return j};j.offset=function(A){if(!arguments.length){return f}f=A==null?A:a.functor(A);return j};j.html=function(A){if(!arguments.length){return h}h=A==null?A:a.functor(A);return j};j.destroy=function(){if(p){t().remove();p=null}return j};function k(){return"n"}function c(){return[0,0]}function r(){return" "}var x=a.map({n:b,s:v,e:d,w:s,nw:e,ne:n,sw:y,se:g}),i=x.keys();function b(){var A=m();return{top:A.n.y-p.offsetHeight,left:A.n.x-p.offsetWidth/2}}function v(){var A=m();return{top:A.s.y,left:A.s.x-p.offsetWidth/2}}function d(){var A=m();return{top:A.e.y-p.offsetHeight/2,left:A.e.x}}function s(){var A=m();return{top:A.w.y-p.offsetHeight/2,left:A.w.x-p.offsetWidth}}function e(){var A=m();return{top:A.nw.y-p.offsetHeight,left:A.nw.x-p.offsetWidth}}function n(){var A=m();return{top:A.ne.y-p.offsetHeight,left:A.ne.x}}function y(){var A=m();return{top:A.sw.y,left:A.sw.x-p.offsetWidth}}function g(){var A=m();return{top:A.se.y,left:A.e.x}}function o(){var A=a.select(document.createElement("div"));A.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"});return A.node()}function w(A){A=A.node();if(A.tagName.toLowerCase()==="svg"){return A}return A.ownerSVGElement}function t(){if(p===null){p=o();document.body.appendChild(p)}return a.select(p)}function m(){var F=z||a.event.target;while("undefined"===typeof F.getScreenCTM&&"undefined"===F.parentNode){F=F.parentNode}var G={},D=F.getScreenCTM(),C=F.getBBox(),E=C.width,B=C.height,A=C.x,H=C.y;q.x=A;q.y=H;G.nw=q.matrixTransform(D);q.x+=E;G.ne=q.matrixTransform(D);q.y+=B;G.se=q.matrixTransform(D);q.x-=E;G.sw=q.matrixTransform(D);q.y-=B/2;G.w=q.matrixTransform(D);q.x+=E;G.e=q.matrixTransform(D);q.x-=E/2;q.y-=B/2;G.n=q.matrixTransform(D);q.y+=B;G.s=q.matrixTransform(D);return G}return j}}));